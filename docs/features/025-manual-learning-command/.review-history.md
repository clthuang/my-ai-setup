# Review History

## Stage 1: Spec-Reviewer Review - Iteration 1 - 2026-02-21T01:40:00Z

**Reviewer:** spec-reviewer (skeptic)
**Decision:** Needs Revision

**Issues:**
- [blocker] [assumptions] Feasibility section overstates what is already implemented vs. what requires code changes for the confidence parameter on store_memory (at: Feasibility Assessment, Key Assumptions)
  Suggestion: Distinguish between 'schema supports it' (true) and 'API already exposes it' (false)
- [blocker] [testability] SC-4's 40% injection cap has no specified enforcement mechanism — could be passive monitoring or active pipeline constraint (at: Success Criteria SC-4)
  Suggestion: Clarify whether enforcement is organic via confidence-based ranking demotion or requires pipeline modification
- [blocker] [testability] AC-2's '<10 characters of meaningful content' threshold is ambiguous (at: Acceptance Criteria AC-2)
  Suggestion: Replace with concrete, deterministic rule using stripped input string length
- [warning] [assumptions] AC-3 does not acknowledge that content_hash is exact-match-after-normalization, not semantic similarity (at: AC-3)
  Suggestion: Add note clarifying content_hash is whitespace/case-normalized exact match
- [warning] [traceability] No acceptance criterion tests the <60 character name constraint or defines overflow behavior (at: AC-1)
  Suggestion: Add truncation rule for generated names exceeding 60 characters
- [warning] [testability] AC-11 trigger patterns are inherently LLM-judgment-based and not deterministically testable (at: AC-11)
  Suggestion: Reframe as documentation/content criterion about skill artifact content
- [warning] [scope] Model-initiated capture fallback when MCP is unavailable is unaddressed (at: AC-4, AC-5)
  Suggestion: Add acceptance criterion for model-initiated capture CLI fallback
- [warning] [clarity] Dependencies section understates store_memory changes needed (at: Dependencies)
  Suggestion: Clarify both confidence param addition and /remember passing confidence=low
- [warning] [testability] SC-5 cannot distinguish user-initiated vs model-initiated captures (at: SC-5)
  Suggestion: Accept combined measurement or add distinguishing field

**Changes Made:**
- Feasibility section reworded to distinguish schema support (verified) from API exposure (requires one-line change)
- SC-4 clarified as organic enforcement via confidence-based ranking demotion with monitoring SQL
- AC-2 threshold changed to 20 characters measured on stripped input string
- AC-3 note added about content_hash being exact-match-after-normalization
- AC-1 name constraint clarified with truncation rule
- AC-11 reframed as documentation/content criterion about skill artifact content
- AC-13 added for model-initiated capture CLI fallback when MCP unavailable
- Dependencies section clarified with both changes needed for store_memory
- SC-5 reworded to explicitly cover combined user+model captures
- SC-1 clarified that embedding may occur asynchronously after confirmation
- AC-10 session-start hint given exact text and placement
- Configuration Keys section added with key names, values, defaults, descriptions

---

## Stage 1: Spec-Reviewer Review - Iteration 2 - 2026-02-21T01:50:00Z

**Reviewer:** spec-reviewer (skeptic)
**Decision:** Approved

**Issues (addressed post-approval for polish):**
- [warning] [assumptions] AC-3 dedup hash ambiguity — unclear if user raw text or model-generated description is hashed
  Resolved: Clarified that user's raw free-text IS the description field used for hashing
- [warning] [assumptions] AC-1 reasoning generation not explicitly noted as single inference step
  Resolved: Added note that reasoning is generated in single inference step alongside category/name
- [warning] [clarity] Command implementation type unspecified
  Resolved: Dependencies updated to specify command markdown file with model instructions
- [warning] [assumptions] Feasibility says "one-line change" but two changes needed
  Resolved: Reworded to "two changes: tool signature + _process_store_memory passthrough"
- [warning] [testability] AC-12 category inference is LLM-judgment-based
  Resolved: Added note parallel to AC-11 about heuristic nature and spot-check verification

---

## Stage 2: Phase Review - Iteration 1 - 2026-02-21T01:55:00Z

**Reviewer:** phase-reviewer (gatekeeper)
**Decision:** Approved

**Issues (addressed post-approval for polish):**
- [warning] Problem statement is two sentences, not one
  Resolved: Condensed to single sentence
- [warning] AC-1 missing error path for reasoning generation failure
  Note: Model processes command directly; failure to generate reasoning is not a realistic scenario
- [warning] AC-8 leaks implementation detail (specific CLI path)
  Resolved: Labeled as "reference implementation" detail to distinguish from behavioral requirement
- [warning] AC-2 threshold discrepancy with PRD not called out
  Resolved: Added note explaining threshold change rationale
- [suggestion] SC-4 monitoring SQL is approximation over all-time recall
  Acknowledged: SQL is sufficient proxy for initial release
- [suggestion] AC-10 placement ambiguity between injector and session-start hook
  Resolved: Clarified as session-start hook's build_context() output

---
