# Review History: 021-project-level-workflow

## Stage 1: Spec-Reviewer Review - Iteration 1 - 2026-02-10T12:15:00Z

**Reviewer:** spec-reviewer (skeptic)
**Decision:** Needs Revision

**Issues:**
- [blocker] [clarity] Scale signals referenced but not enumerated in spec (at: FR-1, Success Criteria line 1)
- [blocker] [clarity] Decomposition output schema referenced but not defined (at: FR-3, AC-4)
- [blocker] [clarity] Project .meta.json schema not defined (at: FR-2, AC-3)
- [blocker] [assumptions] Feature creation mechanism from decomposition ambiguous (at: FR-4, AC-7)
- [blocker] [assumptions] Planned→active transition entirely unspecified (at: Scope, AC section)
- [warning] [traceability] Phase 1 single-active constraint not acknowledged (at: Out of Scope)
- [warning] [traceability] depends_on_features enforcement deferral not stated (at: FR-4)
- [warning] [traceability] AC-15 vs Out of Scope contradiction on show-status (at: AC-15, Out of Scope line 3)
- [warning] [testability] Milestone grouping range vague (at: AC-6)
- [warning] [assumptions] validate.sh planned feature compatibility (at: Success Criteria line 10)
- [warning] [assumptions] Context injection mechanism unclear (at: FR-4b)
- [warning] [assumptions] expected_lifetime setter unspecified (at: FR-5, AC-3)
- [warning] [testability] AC-12/13 test LLM judgment (at: AC-12, AC-13)
- [suggestion] [clarity] Component count "11" unclear (at: FR-6, Success Criteria line 15)
- [suggestion] [clarity] AC-8/9 "available as context" not verifiable (at: AC-8, AC-9)
- [suggestion] [clarity] /create-project command interface unspecified (at: FR-2)

**Changes Made:**
- Enumerated all 6 scale signals with detection heuristics in FR-1
- Added full decomposition output JSON schema in FR-3
- Added full project .meta.json schema in FR-2 with expected_lifetime
- Specified decomposing skill creates feature directories directly (FR-4)
- Added complete planned→active transition flow (5 steps) with AC-8
- Added single-active-feature enforcement for Phase 1 in FR-4
- Added explicit deferral note for depends_on_features enforcement
- Clarified Out of Scope: "Full project dashboard" vs basic grouping in Phase 1
- Delegated milestone grouping to LLM decomposer via suggested_milestones
- Added validate.sh planned feature compatibility with AC-18
- Specified context injection as Step 5 in validateAndSetup with exact markdown format
- Specified expected_lifetime set during project creation via AskUserQuestion
- Reframed AC-12/13 to test system-level behavior (prompt criteria, JSON fields)
- Clarified component count as "6 direct + 5 phase commands via workflow-transitions"
- Reframed AC-8/9 as verifiable assertions (presence of headings in input context)
- Specified /create-project as both auto-invoked and standalone with --prd argument

---

## Stage 1: Spec-Reviewer Review - Iteration 2 - 2026-02-10T12:30:00Z

**Reviewer:** spec-reviewer (skeptic)
**Decision:** Approved (all 5 blockers resolved)

---

## Stage 2: Phase Review - 2026-02-10T12:35:00Z

**Reviewer:** phase-reviewer (gatekeeper)
**Decision:** Approved

**Issues:**
- [warning] FR-5/FR-6 numbering collides with PRD Phase 2 FR numbers — noted for traceability
- [warning] expected_lifetime is a spec-level addition to PRD schema — noted for traceability
- [warning] No AC for list-features with planned features — designer can infer from FR-6
- [suggestion] Decomposition output feature names → id-slug mapping not explicitly called out
- [suggestion] Project .meta.json schema example shows post-decomposition state vs AC-3 creation state

---

## Stage 1: Spec-Reviewer Review - Iteration 3 - 2026-02-10T13:00:00Z

**Reviewer:** spec-reviewer (skeptic)
**Decision:** Approved

**Issues:**
- [warning] [assumptions] Planned→active transition triggers misleading 'skipping brainstorm' warning (at: FR-4)
- [warning] [assumptions] validate.sh already accepts nulls silently; need bidirectional validation (at: FR-6, AC-18)
- [warning] [clarity] BLOCKED state in Stage 7 AskUserQuestion not specified for project option (at: AC-1, FR-1)
- [warning] [clarity] Decomposition-created features bypass create-feature side effects (kanban, auto-specify) (at: FR-4)
- [warning] [assumptions] Session-start needs to read two .meta.json files when project_id present (at: FR-6)
- [warning] [assumptions] Project directory path resolution from project_id needs glob pattern (at: FR-4b, FR-4)
- [suggestion] [clarity] Project ID zero-padding width not explicit (at: FR-2)
- [suggestion] [clarity] Complexity field valid values not enumerated (at: FR-3 schema)

**Changes Made:**
- Added brainstorm skip suppression note for planned features with project_id (FR-4)
- Reframed validate.sh as bidirectional validation (non-null for active, null only for planned)
- Specified "Promote to Project" only in PASSED/SKIPPED state; BLOCKED unchanged (FR-1)
- Added create-feature side effects bypass note for planned features (FR-4)
- Added project directory resolution via glob pattern docs/projects/{project_id}-*/ (FR-4b)
- Updated session-start hook description with two-file read and graceful degradation (FR-6)
- Specified 3-digit zero-padding for project IDs (FR-2)
- Added complexity values: Low, Medium, High (FR-3 schema)

---

## Stage 2: Phase Review - Iteration 3 - 2026-02-10T13:00:00Z

**Reviewer:** phase-reviewer (gatekeeper)
**Decision:** Approved

**Issues:**
- [warning] PRD specifies YAML front-matter for roadmap.md; spec drops it — divergence not acknowledged (at: FR-3)
- [warning] FR-5 expected_lifetime has no PRD provenance noted (at: FR-5)
- [warning] .meta.json schema example shows post-decomposition state (at: FR-2)
- [warning] AC-9 wording "PRD title heading" ambiguous vs FR-4b full content (at: AC-9)
- [suggestion] roadmap.md template example would help designer (at: FR-3, AC-6)
- [suggestion] Decomposing skill trigger (auto vs manual) not explicit (at: FR-3)

**Changes Made:**
- Added PRD divergence note for roadmap.md YAML front-matter (FR-3)
- Aligned AC-9 wording with FR-4b: full prd.md and roadmap.md content under headings
- Clarified decomposing skill is auto-invoked by create-project command (FR-3)
- roadmap.md template deferred to design phase (appropriate for design, not spec)

---

## Stage 1: Spec-Reviewer Review - Iteration 4 - 2026-02-10T13:30:00Z

**Reviewer:** spec-reviewer (skeptic)
**Decision:** Approved

**Issues:**
- [warning] [assumptions] LLM topological sort reliability — design should evaluate programmatic alternative (at: Feasibility)
- [warning] [testability] AC-14 tests non-deterministic LLM behavior (at: AC-14)
- [warning] [clarity] Dual iteration cycle nesting ambiguity — 3 reviewer + 3 user = independent budgets (at: FR-3)
- [warning] [assumptions] Context injection may pressure context window for large projects (at: FR-4b, AC-9)
- [suggestion] [traceability] Roadmap YAML front-matter divergence should also appear in Out of Scope (at: FR-3)
- [suggestion] [clarity] validate.sh scope — cross-referential validation deferred (at: FR-4, AC-18)

**Changes Made:**
- Added design consideration note for programmatic topological sort (Feasibility)
- Added non-deterministic testing note to AC-14
- Clarified independent iteration budgets in decomposing skill description (FR-3)
- Added context size note with 30% threshold guidance (FR-4b)
- Added roadmap YAML front-matter to Out of Scope section
- Added validate.sh cross-referential validation deferral note (FR-4)

---

## Stage 2: Phase Review - Iteration 4 - 2026-02-10T13:30:00Z

**Reviewer:** phase-reviewer (gatekeeper)
**Decision:** Approved

**Issues:**
- [warning] expected_lifetime PRD divergence not called out (at: FR-5/FR-2)
- [warning] AC-1 label text relationship to existing Stage 7 not stated (at: AC-1)
- [warning] create-project command flow implicit (at: FR-2, FR-3)
- [suggestion] Feasibility line numbers may drift (at: Feasibility)
- [suggestion] Reviewer output schema not shown (at: FR-3, AC-13)

**Changes Made:**
- Added PRD divergence note for expected_lifetime field (FR-5)
- Added label match note to AC-1 ("Promote to Project" is only new addition)
- Made create-project command flow explicit: prompt → create dir → write files → invoke decomposing (FR-2)
- Reviewer output schema deferred to design (appropriate level of detail)

---

## Stage 1: Spec-Reviewer Review - Iteration 5 - 2026-02-10T14:00:00Z

**Reviewer:** spec-reviewer (skeptic)
**Decision:** Approved

**Issues:**
- [warning] [assumptions] expected_lifetime prompt unclear for brainstorm promotion path (at: FR-2)
- [warning] [clarity] AC-5 cycle detection → refinement iteration relationship ambiguous (at: AC-5)
- [warning] [testability] AC-14 non-deterministic — already addressed with verification note
- [suggestion] [traceability] FR-5/FR-6 numbering overlap with PRD — disclaimer adequate
- [suggestion] [traceability] Single-active-feature Phase 2 forward-reference (at: FR-4)

**Changes Made:**
- Clarified command flow applies to both invocation paths (FR-2)
- Linked AC-5 cycle detection to AC-12 refinement iterations explicitly
- Added Phase 2 forward-reference to single-active enforcement (FR-4)

---

## Stage 2: Phase Review - Iteration 5 - 2026-02-10T14:00:00Z

**Reviewer:** phase-reviewer (gatekeeper)
**Decision:** Approved

**Issues:**
- [warning] "(recommended)" label implicit — only shown when threshold met
- [warning] ID assignment atomicity for concurrent runs — solo-dev safe
- [warning] AC-14 verification approach — already documented
- [suggestion] Topological sort LLM vs programmatic — clean handoff to design
- [suggestion] Context injection prompt placement — sufficient for design

**Changes Made:**
- No additional changes needed — warnings are design-level concerns already delegated

---
