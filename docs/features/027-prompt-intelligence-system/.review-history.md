# Review History: 027 Prompt Intelligence System

## Design Review - Iteration 1 - 2026-02-24T00:46:00Z

**Reviewer:** design-reviewer (skeptic)
**Decision:** Needs Revision

**Issues:**
- [blocker] [consistency] Internet-researcher output schema mismatch — 3 different schemas referenced
- [blocker] [completeness] Accept-some partial merge algorithm unspecified
- [blocker] [feasibility] component-authoring.md two-location Glob path unworkable from cache dir
- [warning] [completeness] Deduplication criteria undefined
- [warning] [completeness] Write target ambiguous for refresh command
- [warning] [completeness] Agent prompt too generic — missing search queries
- [warning] [completeness] Token budget check missing for improved version
- [warning] [completeness] "Section" definition ambiguous for accept-some
- [warning] [completeness] YOLO mode missing validate.sh note

**Changes Made:**
All 3 blockers and 6 warnings addressed: unified agent schema, defined CHANGE/END CHANGE delimiters, distilled component-authoring into seed, added deduplication heuristic, added Glob resolve + write-back, added specific search queries, added token budget check, defined section boundaries, added validate.sh note.

---

## Design Review - Iteration 2 - 2026-02-24T00:52:00Z

**Reviewer:** design-reviewer (skeptic)
**Decision:** Needs Revision (approved: true, but 4 warnings under strict threshold)

**Issues:**
- [warning] [consistency] Skill name 'promptimize' vs gerund convention — validate.sh does not enforce gerund, acceptable exception
- [warning] [completeness] Search queries claimed missing — FALSE POSITIVE, queries exist at lines 216-224
- [warning] [feasibility] CHANGE/END CHANGE markers may be malformed by LLM — needs fallback
- [warning] [completeness] CHANGE marker format ambiguity — needs concrete example
- [warning] [assumptions] Skill token budget risk — behavioral anchors should move to references/
- [suggestion] [completeness] Dimension applicability matrix per component type
- [suggestion] [complexity] Strengths section generation rule
- [suggestion] [consistency] promptimize command naming — acceptable brand name

**Changes Made:**
Addressed 3 real warnings (skipped false positive on search queries): added concrete CHANGE block example, added malformed-marker fallback to Accept-all/Reject, moved behavioral anchors to references/scoring-rubric.md. Also added dimension applicability matrix and strengths generation rule (suggestions).

---

## Design Review - Iteration 3 - 2026-02-24T00:58:00Z

**Reviewer:** design-reviewer (skeptic)
**Decision:** Needs Revision (approved: true, but 3 warnings under strict threshold)

**Issues:**
- [warning] [consistency] Spec-design divergence on component-authoring.md loading — spec says "loaded at runtime", design says "distilled into seed"
- [warning] [completeness] Guidelines file not found — refresh command has no error for missing Glob results
- [warning] [assumptions] Agent output parsing — internet-researcher may return unparseable output
- [suggestion] [completeness] Stub file guard — scoring near-empty files may confuse
- [suggestion] [feasibility] Guidelines growth — file may grow large over time

**Changes Made:**
Updated spec.md to match design decision (distilled at seed time, not runtime). Added Glob-not-found error to refresh command step 1. Added unparseable-output fallback to refresh command step 3. Suggestions noted as operational guidance.

---

## Handoff Review - Iteration 1 - 2026-02-24T01:02:00Z

**Reviewer:** phase-reviewer (gatekeeper)
**Decision:** Needs Revision (approved: true, but 2 warnings under strict threshold)

**Issues:**
- [warning] internet-researcher agent output format not specified — FALSE POSITIVE (specified at lines 14, 254, 404 of design.md)
- [warning] Inseparable block merge criterion undefined for Accept-some overlapping dimensions

**Changes Made:**
Added explicit line-range overlap criterion for inseparable block merging. False positive on agent output noted.

---

## Handoff Review - Iteration 2 - 2026-02-24T01:06:00Z

**Reviewer:** phase-reviewer (gatekeeper)
**Decision:** Needs Revision (approved: true, but 2 warnings)

**Issues:**
- [warning] Data flow between skill process steps implicit — addressed with explicit step 4→5→6 flow note
- [warning] Accept-some merge invariant unstated — added markdown validity invariant
- [suggestion] Implementation order constraint — added to Dependencies section

**Changes Made:**
Added data flow note to step 5, merge invariant to Accept-some, implementation order constraint to Dependencies.

---

## Handoff Review - Iteration 3 - 2026-02-24T01:10:00Z

**Reviewer:** phase-reviewer (gatekeeper)
**Decision:** Approved (1 minor warning: section name inconsistency)

**Issues:**
- [warning] Persuasion Techniques section missing from refresh command preserved sections list — fixed
- [suggestion] Glob patterns not explicit for skill reference loading — added concrete patterns

**Changes Made:**
Added Persuasion Techniques to preserved sections list. Added concrete two-location Glob patterns for reference file loading.

---
